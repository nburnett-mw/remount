(function(a,b){"object"==typeof exports&&"undefined"!=typeof module?b(exports,require("react"),require("react-dom")):"function"==typeof define&&define.amd?define(["exports","react","react-dom"],b):(a=a||self,b(a.Remount={},a.React,a.ReactDOM))})(this,function(a,b,c){'use strict';function d(a){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},d(a)}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function g(a,b,c){return b&&f(a.prototype,b),c&&f(a,c),a}function h(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function j(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function k(a){for(var b,c=1;c<arguments.length;c++)b=null==arguments[c]?{}:arguments[c],c%2?j(Object(b),!0).forEach(function(c){h(a,c,b[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(b)):j(Object(b)).forEach(function(c){Object.defineProperty(a,c,Object.getOwnPropertyDescriptor(b,c))});return a}function l(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),b&&n(a,b)}function m(a){return m=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)},m(a)}function n(a,b){return n=Object.setPrototypeOf||function(a,b){return a.__proto__=b,a},n(a,b)}function o(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(a){return!1}}function p(){return p=o()?Reflect.construct:function(b,c,d){var e=[null];e.push.apply(e,c);var a=Function.bind.apply(b,e),f=new a;return d&&n(f,d.prototype),f},p.apply(null,arguments)}function q(a){return-1!==Function.toString.call(a).indexOf("[native code]")}function r(a){var b="function"==typeof Map?new Map:void 0;return r=function(a){function c(){return p(a,arguments,m(this).constructor)}if(null===a||!q(a))return a;if("function"!=typeof a)throw new TypeError("Super expression must either be null or a function");if("undefined"!=typeof b){if(b.has(a))return b.get(a);b.set(a,c)}return c.prototype=Object.create(a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),n(c,a)},r(a)}function s(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function t(a,b){return b&&("object"==typeof b||"function"==typeof b)?b:s(a)}function u(a){return v(a)||w(a)||x()}function v(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}}function w(a){if(Symbol.iterator in Object(a)||"[object Arguments]"===Object.prototype.toString.call(a))return Array.from(a)}function x(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function y(){if(!(window.HTMLElement&&window.HTMLElement._babelES5Adapter||void 0===window.Reflect||void 0===window.customElements||window.customElements.hasOwnProperty("polyfillWrapFlushCallback"))){var b=HTMLElement;window.HTMLElement=function(){return Reflect.construct(b,[],this.constructor)},HTMLElement.prototype=b.prototype,HTMLElement.prototype.constructor=HTMLElement,Object.setPrototypeOf(HTMLElement,b),HTMLElement._babelES5Adapter=!0}}function z(a,b,c){var d=c.onUpdate,f=c.onUnmount,h=c.onMount;y();var i=a.attributes||[],j=function(b){function c(){return e(this,c),t(this,m(c).apply(this,arguments))}return l(c,b),g(c,[{key:"connectedCallback",value:function(){this._mountPoint=A(this,a),h(this,this._mountPoint)}},{key:"disconnectedCallback",value:function(){this._mountPoint&&f(this,this._mountPoint)}},{key:"attributeChangedCallback",value:function(){this._mountPoint&&d(this,this._mountPoint)}}],[{key:"observedAttributes",get:function(){return["props-json"].concat(u(i))}}]),c}(r(HTMLElement));a.quiet&&window.customElements.get(b)||window.customElements.define(b,j)}function A(a,b){var c=b.shadow;if(c&&a.attachShadow){var d=document.createElement("span");return a.attachShadow({mode:"open"}).appendChild(d),d}return a}function B(a,b){for(var c=0,d=a.length;c<d;c++)b(a[c])}function C(){return"MutationObserver"in window}function D(a,b,c){a.nodeName.toLowerCase()===b?(c.onMount(a,a),E(a,c),F(a,c)):a.children&&a.children.length&&B(a.children,function(a){H(a)&&D(a,b,c)})}function E(a,b){var c=b.onUpdate,d=new MutationObserver(function(a){B(a,function(a){var b=a.target;H(b)&&c(b,b)})});d.observe(a,{attributes:!0})}function F(a,b){var c=b.onUnmount,d=a.parentNode;if(d){var e=new MutationObserver(function(b){B(b,function(b){B(b.removedNodes,function(b){a!==b||H(a)&&(e.disconnect(d),c(a,a))})})});e.observe(d,{childList:!0,subtree:!0})}}function G(a){return!!(-1!==a.indexOf("-")&&a.match(/^[a-z][a-z0-9-]*$/))}function H(a){return!!a}function I(){if(U)return U;var a=[V,X].find(function(a){return!!a.isSupported()});return a||console.warn("Remount: This browser doesn't support the MutationObserver API or the Custom Elements API. Including polyfills might fix this. Remount elements will not work. https://github.com/rstacruz/remount"),U=a,a}function J(a,b){var c=I();c&&Object.keys(a).forEach(function(d){var e=Object.assign({},b,K(a[d])),f=e.adapter;if(!f)throw new Error("No suitable adapter found");c.defineElement(e,d,{onMount:function(a,b){var c=M(a,e.attributes);e.shadow&&e.retarget?f.mount(e,b,c,a):f.mount(e,b,c,null)},onUpdate:function(a,b){var c=M(a,e.attributes);f.update(e,b,c,null)},onUnmount:function(a,b){f.unmount(e,b)}})})}function K(a){return L(a)?a:{component:a}}function L(a){return"object"===d(a)&&a.component}function M(a,b){var c=a.getAttribute("props-json");if(c)return JSON.parse(c);return(b||[]).reduce(function(b,c){return b[c]=a.getAttribute(c)||a[c],b},{})}function N(a){for(var b in a)if(a.hasOwnProperty(b)&&-1!==b.indexOf("_reactInternal"))return a[b]}function O(a){return a?a.memoizedProps?a.memoizedProps:a._currentElement&&a._currentElement.props?a._currentElement.props:void 0:void 0}function P(a,b,c){a.persist=function(){a.isPersistent=function(){return!0}},c[b]&&c[b](a)}function Q(a){return Z[a]?Z[a]:a.replace(/^on/,"").toLowerCase()}function R(a){for(var b=[];a;){if(b.push(a),"HTML"===a.tagName)return b.push(document),b.push(window),b;a=a.parentElement}}function S(){var a=!1;try{var b=Object.defineProperty({},"passive",{get:function(){a=!0}});window.addEventListener("testPassive",null,b),window.removeEventListener("testPassive",null,b)}catch(a){}return a}function T(a,d,e,f){var g=a.component,h=b.createElement(g,e);c.render(h,d),f&&_(f.shadowRoot)}var U,V=Object.freeze({__proto__:null,name:"CustomElements",defineElement:z,isSupported:function(){return!!(window.customElements&&window.customElements.define)},supportsShadow:function(){return!!(document&&document.body&&document.body.attachShadow)}}),W={},X=Object.freeze({__proto__:null,name:"MutationObserver",observers:W,isSupported:C,defineElement:function(a,b,c){if(b=b.toLowerCase(),!G(b)){if(a.quiet)return;throw new Error("Remount: \"".concat(b,"\" is not a valid custom element elName"))}if(W[b]){if(a.quiet)return;throw new Error("Remount: \"".concat(b,"\" is already registered"))}var d=new MutationObserver(function(a){B(a,function(a){B(a.addedNodes,function(a){H(a)&&D(a,b,c)})})});d.observe(document.body,{childList:!0,subtree:!0}),W.MutationObserver=d,window.addEventListener("DOMContentLoaded",function(){var a=document.getElementsByTagName("MutationObserver");B(a,function(a){return D(a,"MutationObserver",c)})})},supportsShadow:function(){return!1}}),Y=["onAbort","onAnimationCancel","onAnimationEnd","onAnimationIteration","onAuxClick","onBlur","onChange","onClick","onClose","onContextMenu","onDoubleClick","onError","onFocus","onGotPointerCapture","onInput","onKeyDown","onKeyPress","onKeyUp","onLoad","onLoadEnd","onLoadStart","onLostPointerCapture","onMouseDown","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onPointerCancel","onPointerDown","onPointerEnter","onPointerLeave","onPointerMove","onPointerOut","onPointerOver","onPointerUp","onReset","onResize","onScroll","onSelect","onSelectionChange","onSelectStart","onSubmit","onTouchCancel","onTouchMove","onTouchStart","onTransitionCancel","onTransitionEnd","onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop","onFocusOut"],Z={onDoubleClick:"dblclick"},$={onInput:"onChange",onFocusOut:"onBlur",onSelectionChange:"onSelect"},_=function(a){var b=[];return Y.forEach(function(c){function d(b){for(var d=b.path||b.composedPath&&b.composedPath()||R(b.target),e=0;e<d.length;e++){var f=d[e],g=N(f),h=O(g);if(g&&h&&P(b,c,h),g&&h&&$[c]&&P(b,$[c],h),b.cancelBubble)break;if(f===a)break}}var e=Q(c),f=!1;S()&&("touchmove"===e||"touchstart"===e)&&(f={capture:!0,passive:!0}),a.addEventListener(e,d,f),b.push(function(){a.removeEventListener(e,d,!1)})}),function(){b.forEach(function(a){a()})}},aa=Object.freeze({__proto__:null,mount:function(a,b,c,d){return T(a,b,c,d)},update:T,unmount:function(a,b){c.unmountComponentAtNode(b)}});a.define=function(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},b=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};return J(a,k({adapter:aa},b))},a.getStrategy=I,Object.defineProperty(a,"__esModule",{value:!0})});
